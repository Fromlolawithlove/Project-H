<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doorzichtig Tafelzeil 2mm - Configurator</title>
    <style>
        /* [Behoud alle vorige CSS] */

        /* Nieuwe hoeveelheidscontrols */
        .quantity-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }
        .qty-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #3b82f6;
            background: white;
            color: #3b82f6;
            border-radius: 8px;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .qty-btn:hover {
            background: #3b82f6;
            color: white;
        }
        #quantity {
            width: 70px;
            text-align: center;
            font-size: 18px;
        }

        /* Aanpassingen voor correcte schaal */
        .preview-container {
            aspect-ratio: 1.4; /* Basisverhouding breedte/lengte */
        }
    </style>
</head>
<body>
    <!-- [Behoud dezelfde HTML structuur] -->
    
    <!-- Nieuwe hoeveelheidsselector boven bestelknop -->
    <div class="quantity-control">
        <button class="qty-btn" onclick="adjustQuantity(-1)">-</button>
        <input type="number" id="quantity" value="1" min="1" max="99">
        <button class="qty-btn" onclick="adjustQuantity(1)">+</button>
    </div>

    <button class="order-btn">Direct bestellen</button>

    <script>
        const CONFIG = {
            maxWidth: 140,
            maxLength: 2000,
            pricePerM2: 31.95,
            containerWidth: 280, // Gebaseerd op preview-container breedte
            containerHeight: 200
        };

        function calculateDimensions() {
            // Correcte schaalberekening
            const width = Math.min(CONFIG.maxWidth, Math.max(1, elements.width.value));
            const length = Math.min(CONFIG.maxLength, Math.max(1, elements.length.value));
            const hasExtraLength = document.getElementById('extraLength').checked;
            const quantity = document.getElementById('quantity').value;

            // Update inputs
            elements.width.value = width;
            elements.length.value = length;

            // Bereken schaalratio
            const widthRatio = CONFIG.containerWidth / width;
            const heightRatio = CONFIG.containerHeight / length;
            const scale = Math.min(widthRatio, heightRatio) * 0.9; // 10% marge

            // Update visualisatie
            elements.rectangle.style.width = `${width * scale}px`;
            elements.rectangle.style.height = `${length * scale}px`;

            // Update labels
            elements.widthLabel.textContent = `${width} cm`;
            elements.lengthLabel.textContent = `${hasExtraLength ? 
                `${Math.round(length * 1.01)} cm` : 
                `${length} cm`}`;

            // Prijsberekening met hoeveelheid
            const actualLength = hasExtraLength ? length * 1.01 : length;
            const price = (width/100 * actualLength/100 * CONFIG.pricePerM2 * quantity).toFixed(2);
            elements.price.textContent = `â‚¬${price}`;
        }

        // Nieuwe hoeveelheidsfuncties
        function adjustQuantity(change) {
            const input = document.getElementById('quantity');
            let newVal = parseInt(input.value) + change;
            if(newVal < 1) newVal = 1;
            input.value = newVal;
            calculateDimensions();
        }

        // [Behoud overige JavaScript]
    </script>
</body>
</html>
